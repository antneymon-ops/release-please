{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Claw-Bot Configuration",
  "description": "Configuration schema for the Claw-Bot automation system",
  "type": "object",
  "properties": {
    "autoApproveDependencies": {
      "type": "boolean",
      "description": "Enable automatic PR approval for dependency updates",
      "default": false
    },
    "autoMerge": {
      "type": "boolean",
      "description": "Enable automatic PR merging when all checks pass",
      "default": false
    },
    "requiredChecks": {
      "type": "array",
      "description": "Required status checks that must pass before auto-merge",
      "items": {
        "type": "string"
      },
      "default": ["build", "test", "lint"]
    },
    "autoLabel": {
      "type": "boolean",
      "description": "Auto-label PRs based on content analysis",
      "default": true
    },
    "ciMonitoring": {
      "type": "boolean",
      "description": "Monitor CI/CD and auto-retry failed jobs",
      "default": true
    },
    "maxRetries": {
      "type": "integer",
      "description": "Maximum number of retry attempts for failed CI jobs",
      "minimum": 0,
      "maximum": 5,
      "default": 2
    },
    "dependencyUpdates": {
      "type": "boolean",
      "description": "Enable automatic dependency update PRs",
      "default": false
    },
    "dependencyCheckSchedule": {
      "type": "string",
      "description": "Schedule for dependency checks (cron format)",
      "pattern": "^(\\*|([0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9])|\\*/[0-9]+)\\s+(\\*|([0-9]|1[0-9]|2[0-3])|\\*/[0-9]+)\\s+(\\*|([1-9]|1[0-9]|2[0-9]|3[0-1])|\\*/[0-9]+)\\s+(\\*|([1-9]|1[0-2])|\\*/[0-9]+)\\s+(\\*|[0-6]|\\*/[0-9]+)$",
      "default": "0 0 * * 1"
    },
    "securityAutoFix": {
      "type": "boolean",
      "description": "Enable automatic security vulnerability fixes",
      "default": true
    },
    "notifications": {
      "type": "object",
      "description": "Notification channels for important events",
      "properties": {
        "slack": {
          "type": "string",
          "description": "Slack webhook URL"
        },
        "email": {
          "type": "array",
          "description": "Email addresses for notifications",
          "items": {
            "type": "string",
            "format": "email"
          }
        }
      }
    },
    "prRules": {
      "type": "array",
      "description": "Custom rules for PR management",
      "items": {
        "type": "object",
        "required": ["name", "condition", "actions"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Name of the rule"
          },
          "condition": {
            "type": "object",
            "description": "Condition to match",
            "properties": {
              "titlePattern": {
                "type": "string",
                "description": "Regular expression pattern for PR title"
              },
              "labelsInclude": {
                "type": "array",
                "description": "Labels that must be present",
                "items": {
                  "type": "string"
                }
              },
              "labelsExclude": {
                "type": "array",
                "description": "Labels that must not be present",
                "items": {
                  "type": "string"
                }
              },
              "filesPattern": {
                "type": "string",
                "description": "Regular expression pattern for changed files"
              },
              "author": {
                "type": "string",
                "description": "GitHub username of the PR author"
              }
            }
          },
          "actions": {
            "type": "object",
            "description": "Actions to take when condition matches",
            "properties": {
              "addLabels": {
                "type": "array",
                "description": "Labels to add",
                "items": {
                  "type": "string"
                }
              },
              "removeLabels": {
                "type": "array",
                "description": "Labels to remove",
                "items": {
                  "type": "string"
                }
              },
              "requestReviewers": {
                "type": "array",
                "description": "Reviewers to request",
                "items": {
                  "type": "string"
                }
              },
              "assignees": {
                "type": "array",
                "description": "Assignees to add",
                "items": {
                  "type": "string"
                }
              },
              "autoApprove": {
                "type": "boolean",
                "description": "Automatically approve the PR"
              },
              "autoMerge": {
                "type": "boolean",
                "description": "Automatically merge the PR when checks pass"
              },
              "comment": {
                "type": "string",
                "description": "Comment to add to the PR"
              }
            }
          }
        }
      }
    }
  }
}
